# control 原则与核心概念

## 模板（原则）

### 设计目标

- <目标 1>
- <目标 2>

### 契约原则

- <输入/输出契约规则>

### 安全与边界

- <访问约束/护栏>

### 失败与恢复

- <调用失败时的行动>

### 术语表

- <该工具集特有术语>

## 核心概念

### 1. 提醒（Reminder）

提醒是**会话级别**的临时信息，用于在当前对话中追踪待处理事项。

**特点：**

- 仅在当前对话中有效
- 对话结束后自动清除
- 可随时添加、修改、删除

**与 memory 的区别：**
| 特性 | reminder | memory |
|------|----------|--------|
| 持久性 | 会话级 | 永久 |
| 可见性 | 当前对话 | 当前智能体 |
| 容量 | 无严格限制 | 无严格限制 |

### 2. 差遣牒（Taskdoc）

差遣牒是**任务契约**，定义任务的 goals、constraints 和 progress。

**结构：**

- **goals.md**：任务目标
- **constraints.md**：约束条件
- **progress.md**：进度状态

**更新规则：**

- 每次调用 `change_mind` 会替换整个章节
- 不重置对话轮次
- 变更对所有队友可见

## 工具概览

| 工具            | 功能                                     |
| --------------- | ---------------------------------------- |
| add_reminder    | 添加提醒                                 |
| delete_reminder | 删除提醒                                 |
| update_reminder | 更新提醒内容                             |
| change_mind     | 更新差遣牒（goals/constraints/progress） |
| recall_taskdoc  | 读取差遣牒章节                           |

## 最佳实践

### 1. 提醒使用场景

- **任务标记**：标记当前正在处理的任务
- **阻塞记录**：记录遇到的阻塞问题
- **待办清单**：追踪待处理事项

### 2. 差遣牒更新时机

- **目标变更**：当任务目标发生变化时
- **约束调整**：当约束条件需要调整时
- **进度更新**：当任务状态有重要进展时

### 3. 更新策略

- 保持简洁：每次更新只修改必要内容
- 明确标注：用清晰的格式标记已完成/进行中/待处理
- 同步状态：确保 goals、constraints、progress 保持一致

## 限制与注意事项

1. 提醒在对话结束后不会持久化
2. 差遣牒更新使用整段替换，请确保合并已有内容
3. `change_mind` 不重置对话轮次
