# memory 原则与核心概念

## 记忆模型

memory 工具集采用**路径键值存储**模型：

- **路径（path）**：记忆的唯一标识符，类似于文件系统路径，例如 `project/todo` 或 `user/preferences/theme`
- **内容（content）**：记忆的实际内容，可以是任意文本

## 工具概览

| 工具           | 功能                         |
| -------------- | ---------------------------- |
| add_memory     | 创建新记忆（路径不存在时）   |
| replace_memory | 更新已有记忆（路径存在时）   |
| drop_memory    | 删除记忆                     |
| clear_memory   | 清空所有个人记忆（不可恢复） |

## 记忆生命周期

1. **创建（add）**：使用 `add_memory` 创建新记忆
2. **读取（read）**：智能体在生成回复时可读取已有记忆
3. **更新（replace）**：使用 `replace_memory` 更新记忆内容
4. **删除（drop）**：使用 `drop_memory` 删除特定记忆

## 最佳实践

### 1. 路径命名规范

- 使用描述性路径：`project/architecture`、`user/preferences/language`
- 避免使用特殊字符：路径中不要包含 `/`、`\`、`*` 等
- 使用层级结构：按主题组织记忆，例如 `project/todo`、`project/done`

### 2. 内容格式

- 保持内容简洁：每条记忆只包含一个主题
- 使用结构化格式：可以使用 Markdown 格式组织内容
- 定期清理：定期检查并删除过时的记忆

### 3. 使用场景

- **任务持久化**：保存长期任务进度
- **上下文记忆**：保存对话上下文中的重要信息
- **偏好设置**：保存用户偏好和配置信息

## 与其他工具的关系

- **team_memory**：团队共享记忆，所有成员可见
- **reminder**：临时提醒，会话级别
- **change_mind**：更新差遣牒（goals/constraints/progress）

## 限制与注意事项

1. 记忆内容有大小限制（单条记忆最大 1MB）
2. 记忆路径不能超过 255 个字符
3. `clear_memory` 会删除所有记忆，**不可恢复**
