# team_memory 原则与核心概念

## 模板（原则）

### 设计目标

- <目标 1>
- <目标 2>

### 契约原则

- <输入/输出契约规则>

### 安全与边界

- <访问约束/护栏>

### 失败与恢复

- <调用失败时的行动>

### 术语表

- <该工具集特有术语>

## 记忆模型

team_memory 工具集采用**路径键值存储**模型，与 memory 类似，但具有共享特性：

- **路径（path）**：记忆的唯一标识符，类似于文件系统路径
- **内容（content）**：记忆的实际内容，可以是任意文本
- **可见性**：所有团队成员都可以读取和修改

## 工具概览

| 工具                  | 功能                           |
| --------------------- | ------------------------------ |
| add_shared_memory     | 创建新共享记忆（路径不存在时） |
| replace_shared_memory | 更新已有共享记忆（路径存在时） |
| drop_shared_memory    | 删除共享记忆                   |
| clear_shared_memory   | 清空所有共享记忆（不可恢复）   |

## 记忆生命周期

1. **创建（add）**：使用 `add_shared_memory` 创建新共享记忆
2. **读取（read）**：所有团队成员都可以读取共享记忆
3. **更新（replace）**：使用 `replace_shared_memory` 更新记忆内容
4. **删除（drop）**：使用 `drop_shared_memory` 删除特定记忆

## 最佳实践

### 1. 路径命名规范

- 使用描述性路径：`team/project-goals`、`team/conventions/coding-style`
- 避免使用个人标识：`team/todo` 而非 `team/todo-alice`
- 使用层级结构：按主题组织记忆

### 2. 内容格式

- 保持内容简洁：每条记忆只包含一个主题
- 使用结构化格式：可以使用 Markdown 格式组织内容
- 注明更新时间：记录最后更新时间便于追踪

### 3. 使用场景

- **团队约定**：编码规范、提交信息格式、审查流程
- **项目知识**：架构决策、技术选型、API 文档
- **共享上下文**：当前任务状态、阻塞问题、依赖关系

## 与其他工具的关系

- **memory**：个人记忆，仅当前智能体可见
- **reminder**：临时提醒，会话级别
- **change_mind**：更新差遣牒（goals/constraints/progress）

## 限制与注意事项

1. 记忆内容有大小限制（单条记忆最大 1MB）
2. 记忆路径不能超过 255 个字符
3. `clear_shared_memory` 会删除所有共享记忆，**不可恢复**
4. 所有团队成员都可以修改共享记忆，请谨慎操作
