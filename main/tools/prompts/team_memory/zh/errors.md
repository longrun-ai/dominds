# team_memory 错误处理

## 模板（错误）

### 错误行动链（必填）

1. 触发条件
2. 检测信号
3. 恢复步骤
4. 成功判据
5. 升级路径（可选）

## 错误代码

### SHARED_MEMORY_ALREADY_EXISTS

**描述：** 路径已存在，无法使用 `add_shared_memory` 创建新记忆。

**原因：**

- 尝试添加的路径已经被其他共享记忆占用

**解决方案：**

- 使用 `replace_shared_memory` 更新已有记忆
- 或者使用不同的路径创建新记忆

### SHARED_MEMORY_NOT_FOUND

**描述：** 路径不存在，无法执行操作。

**原因：**

- 尝试访问的共享记忆路径不存在
- 路径被删除或从未创建

**解决方案：**

- 如果是更新/删除操作，先使用 `add_shared_memory` 创建
- 检查路径是否正确

### SHARED_MEMORY_PATH_INVALID

**描述：** 路径格式无效。

**原因：**

- 路径包含非法字符
- 路径长度超过限制

**解决方案：**

- 确保路径只包含字母、数字、下划线、斜杠
- 路径长度不超过 255 个字符

### SHARED_MEMORY_CONTENT_TOO_LARGE

**描述：** 记忆内容过大。

**原因：**

- 单条记忆内容超过 1MB 限制

**解决方案：**

- 压缩内容
- 拆分为多条记忆
- 使用外部存储（如文件）

### SHARED_MEMORY_STORAGE_ERROR

**描述：** 存储错误。

**原因：**

- 磁盘空间不足
- 权限问题
- 文件系统错误

**解决方案：**

- 检查磁盘空间
- 检查文件权限
- 重试操作

## 常见问题

### Q: 共享记忆和個人记忆有什么区别？

A: 共享记忆（team_memory）对所有团队成员可见，而个人记忆（memory）只有当前智能体可见。

### Q: 谁可以修改共享记忆？

A: 所有团队成员都可以读取和修改共享记忆。请谨慎操作，避免覆盖他人重要信息。

### Q: 如何避免冲突？

A: 建议在修改前先读取现有内容，确认没有冲突后再更新。也可以在路径中包含版本号或日期来区分。

### Q: clear_shared_memory 会影响其他成员吗？

A: 是的，`clear_shared_memory` 会删除所有共享记忆，影响所有团队成员。此操作不可恢复，请谨慎使用。

### Q: 共享记忆有数量限制吗？

A: 没有严格的数量限制，但建议保持记忆数量在合理范围内（建议少于 100 条）。

### Q: 如何查看团队有哪些共享记忆？

A: 智能体在生成回复时可以访问所有共享记忆。你可以直接询问智能体当前团队有哪些共享记忆。
